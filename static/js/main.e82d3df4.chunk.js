(this["webpackJsonpreact-gmail-api"]=this["webpackJsonpreact-gmail-api"]||[]).push([[0],{102:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(24),o=t.n(l),i=t(46),c=t.n(i),s=t(57),u=t(20),m=Object(n.createContext)(),d=t(22),p=t(13),g=function(e,a){switch(a.type){case"SET_MESSAGES":return Object(p.a)(Object(p.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),[a.payload]),loading:!1});case"SET_MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{message:a.payload});case"SET_CURRENT_LABEL":return Object(p.a)(Object(p.a)({},e),{},{currentLabel:a.payload});case"SET_NEXT_PAGE_TOKEN":return Object(p.a)(Object(p.a)({},e),{},{nextPageToken:a.payload});case"SET_HAS_MORE_MESSAGES":return Object(p.a)(Object(p.a)({},e),{},{hasMoreMessages:a.payload});case"CLEAR_MESSAGES":return Object(p.a)(Object(p.a)({},e),{},{messages:[]});case"SET_LOADING":return Object(p.a)(Object(p.a)({},e),{},{loading:!0});default:return e}},E=function(e){var a=Object(n.useReducer)(g,{messages:[],message:null,currentLabel:"INBOX",nextPageToken:"",hasMoreMessages:!0,isAuthorize:!1,loading:!1}),t=Object(u.a)(a,2),l=t[0],o=t[1],i=function(e){(e.result.messages?e.result.messages:[]).forEach((function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id}).execute((function(e){o({type:"SET_MESSAGES",payload:e.result})}))}))},c=function(e){return o({type:"SET_NEXT_PAGE_TOKEN",payload:e})},s=function(e){return o({type:"SET_HAS_MORE_MESSAGES",payload:e})},d=function(){return o({type:"CLEAR_MESSAGES"})},p=function(){return o({type:"SET_LOADING"})};return r.a.createElement(m.Provider,{value:{messages:l.messages,message:l.message,currentLabel:l.currentLabel,nextPageToken:l.nextPageToken,hasMoreMessages:l.hasMoreMessages,loading:l.loading,getMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.currentLabel;p(),d();var a=window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20});a.execute((function(e){console.log("getMessagesData OK"),e.result.nextPageToken?(c(e.result.nextPageToken),s(!0)):(c(""),s(!1)),i(e)}))},getOneMessage:function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e}).execute((function(e){console.log(e),o({type:"SET_MESSAGE",payload:e.result})}))},setCurrentLabel:function(e){return o({type:"SET_CURRENT_LABEL",payload:e})},loadMoreMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.currentLabel,a=window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20,pageToken:l.nextPageToken});a.execute((function(e){e.result.nextPageToken?(c(e.result.nextPageToken),s(!0)):(c(""),s(!1)),i(e)}))},setLoading:p}},e.children)},f=t(27),b=t(62),y=t(108),h=t(116),v=t(119),C=t(117),w=t(66),x=t(44),O=t(109),S=function(){var e=Object(y.a)(),a=e.isOpen,t=e.onOpen,l=e.onClose,o=Object(h.a)(),i=function(e,a,t){var n="";for(var r in e)n+=r+=": "+e[r]+"\r\n";n+="\r\n"+a;var l=f.Base64.encodeURI(n);window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:l}}).execute(t)},c=function(e){-1!==e.result.labelIds.indexOf("SENT")?o({title:"Message Sent.",description:"We've Sent your email.",status:"success",duration:9e3,isClosable:!0}):o({title:"An error occurred.",description:"Unable to sent your email.",status:"error",duration:9e3,isClosable:!0})};return r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{w:"100%",h:"48px",leftIcon:b.a,borderRadius:"20px",variant:"solid",variantColor:"blue",onClick:t},"New Message"),r.a.createElement(C.a,{isOpen:a,size:"xl",onClose:l,closeOnOverlayClick:!1},r.a.createElement(C.g,null),r.a.createElement(C.d,null,r.a.createElement(C.f,null,"New Message"),r.a.createElement(C.c,null),r.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var a=e.target,t=a.elements.emailTo.value,n=a.elements.subject.value,r=a.elements.message.value;i({To:t,Subject:n},r,c),l()}},r.a.createElement(C.b,null,r.a.createElement(w.a,{isRequired:!0},r.a.createElement(x.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(x.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text"})),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(O.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"}))),r.a.createElement(C.e,null,r.a.createElement(v.a,{type:"reset",variantColor:"blue",mr:3,onClick:l},"Close"),r.a.createElement(v.a,{type:"submit",variantColor:"green"},"Send"))))))},j=t(4),T=t(110),R=t(17),I=t(47),M=function(){var e=Object(n.useContext)(m),a=e.getMessages,t=e.setCurrentLabel,l=Object(n.useState)("INBOX"),o=Object(u.a)(l,2),i=o[0],c=o[1],s=function(e){var n=e.target.id;c(n),t(n),a(n)};return r.a.createElement(j.a,{w:"16%",h:"100%",bg:"white",border:"1px",borderColor:"gray.200",borderTopLeftRadius:"md",borderBottomLeftRadius:"md"},r.a.createElement(T.b,null,r.a.createElement(T.a,{p:"0.5rem 1rem 1rem"},r.a.createElement(S,null)),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"INBOX",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.c,variantColor:"blue",variant:"INBOX"===i?"solid":"ghost",justifyContent:"flex-start",onClick:s},"Inbox")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"STARRED",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.h,variantColor:"blue",variant:"STARRED"===i?"solid":"ghost",justifyContent:"flex-start",onClick:s},"Starred")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"IMPORTANT",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.d,variantColor:"blue",variant:"IMPORTANT"===i?"solid":"ghost",justifyContent:"flex-start",onClick:s},"Important")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"SENT",w:"100%",h:"45px",py:2,pl:8,leftIcon:I.b,variantColor:"blue",variant:"SENT"===i?"solid":"ghost",justifyContent:"flex-start",onClick:s},"Sent")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"DRAFT",w:"100%",h:"45px",py:2,pl:8,leftIcon:I.a,variantColor:"blue",variant:"DRAFT"===i?"solid":"ghost",justifyContent:"flex-start",onClick:s},"Drafts")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"TRASH",w:"100%",h:"45px",py:2,pl:8,leftIcon:"delete",variantColor:"blue",variant:"TRASH"===i?"solid":"ghost",justifyContent:"flxex-start",onClick:s},"Trash")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"CATEGORY_SOCIAL",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.f,variantColor:"blue",variant:"CATEGORY_SOCIAL"===i?"solid":"ghost",justifyContent:"flxex-start",onClick:s},"Social")),r.a.createElement(T.a,null,r.a.createElement(v.a,{id:"CATEGORY_PROMOTIONS",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.e,variantColor:"blue",variant:"CATEGORY_PROMOTIONS"===i?"solid":"ghost",justifyContent:"flxex-start",onClick:s},"Promotions"))))},A=function(e,a){var t=e.find((function(e){return e.name===a}));return void 0!==t?t.value:void 0},k=function(e){return e.replace(/['"]+/g,"")},D=t(111),_=t(118),N=t(112),L=t(12),z=t.n(L),F=function(e){var a=e.message,t=e.handleMessageClick,n=k(A(a.payload.headers,"From").split("<")[0]),l=A(a.payload.headers,"Subject"),o=function(e){var a=document.createElement("textarea");return a.innerHTML=e,a.value}(a.snippet.substr(0,75)),i=a.labelIds.indexOf("UNREAD")>-1?"#fff":"#E2E8F0";return r.a.createElement(D.a,{key:a.id,id:a.id,onClick:t,wrap:"no-wrap",justify:"space-around",py:2,bg:i,borderTop:"1px",borderBottom:"1px",borderColor:"gray.300",cursor:"pointer"},r.a.createElement(_.a,{name:n,src:"https://bit.ly/tioluwani-kolawole"}),r.a.createElement(j.a,{w:"80%"},r.a.createElement(N.a,{fontSize:"sm",color:"gray.700",isTruncated:!0},n),r.a.createElement(N.a,{fontSize:"md",fontWeight:"bold",color:"#3182ce",isTruncated:!0},l),r.a.createElement(N.a,{fontSize:"xs",color:"gray.500"},o)))},B=F;F.prototype={message:z.a.object.isRequired,handleMessageClick:z.a.func.isRequired};var G=t(67),P=t(70),q=t(113),U=t(48),H=t(28),X=function(){var e=Object(n.useContext)(m),a=e.messages,t=e.getOneMessage,l=e.hasMoreMessages,o=e.loadMoreMessages,i=function(e){var a=e.currentTarget.getAttribute("id");t(a)};return r.a.createElement(j.a,{overflowY:"auto",id:"scrollableDiv"},r.a.createElement(G.a,{dataLength:a.length,next:o,hasMore:l,loader:r.a.createElement("h4",null,"Loading..."),scrollableTarget:"scrollableDiv"},a.map((function(e,a){return r.a.createElement(B,{key:a,message:e,handleMessageClick:i})}))))},K=function(){return r.a.createElement(j.a,{mt:6,display:"flex",align:"center",justifyContent:"center"},r.a.createElement(P.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"}))},Y=function(){var e=Object(n.useContext)(m),a=e.messages,t=e.loading;return r.a.createElement(D.a,{direction:"column",wrap:"no-wrap",w:"26%",h:"100%",bg:"#f1f1f1",color:"black"},r.a.createElement(j.a,{py:"5px",bg:"white",border:"1px",borderColor:"gray.200"},r.a.createElement(q.a,{size:"lg"},r.a.createElement(U.a,{children:r.a.createElement(H.a,{name:"search",color:"gray.300"})}),r.a.createElement(x.a,{type:"text",placeholder:"Search mail",borderWidth:"0px",borderRadius:"0px",focusBorderColor:"white"}))),!a.length&&t?r.a.createElement(K,null):r.a.createElement(X,null))},W=function(e){var a=e.replayData,t=Object(y.a)(),l=t.isOpen,o=t.onOpen,i=t.onClose,c=Object(h.a)(),s=function(e,a,t){var n="";for(var r in e)n+=r+=": "+e[r]+"\r\n";n+="\r\n"+a;var l=f.Base64.encodeURI(n);window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:l}}).execute(t)},u=function(e){-1!==e.result.labelIds.indexOf("SENT")?c({title:"Message Sent.",status:"success",duration:3e3,isClosable:!0}):c({title:"An error occurred.",description:"Unable to sent your replay.",status:"error",duration:3e3,isClosable:!0})};return r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{rightIcon:R.g,variantColor:"blue",variant:"outline",onClick:o},"Replay"),r.a.createElement(C.a,{isOpen:l,size:"xl",onClose:i,closeOnOverlayClick:!1},r.a.createElement(C.g,null),r.a.createElement(C.d,null,r.a.createElement(C.f,null,"Replay "),r.a.createElement(C.c,null),r.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var a=e.target,t=a.elements.emailTo.value,n=a.elements.subject.value,r=a.elements["reply-message-id"].value,l=a.elements.message.value;s({To:t,Subject:n,"In-Reply-To":r},l,u),i()}},r.a.createElement(C.b,null,r.a.createElement(x.a,{type:"hidden",id:"reply-message-id",value:a.msgId,readOnly:!0}),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(x.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text",value:a.to,readOnly:!0})),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(x.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:a.subject,readOnly:!0})),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(O.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"}))),r.a.createElement(C.e,null,r.a.createElement(v.a,{type:"reset",variantColor:"blue",mr:3,onClick:i},"Close"),r.a.createElement(v.a,{type:"submit",variantColor:"green"},"Send"))))))},Q=W;W.prototype={replayData:z.a.object.isRequired};var J=function(e){var a=e.forwardData,t=e.getMessageBody,l=Object(y.a)(),o=l.isOpen,i=l.onOpen,c=l.onClose,s=Object(h.a)(),u=function(e,a,t){var n="";n+="From: ".concat(A(a,"From")," \r\n"),n+="Date: ".concat(A(a,"Date")," \r\n"),n+="Subject: ".concat(A(a,"Subject")," \r\n"),n+="To: ".concat(e," \r\n"),n+="Content-Type: text/html; charset=UTF-8 \r\n",n+="\r\n ".concat(t),m("me",n,d)},m=function(e,a,t){var n=f.Base64.encodeURI(a);window.gapi.client.gmail.users.messages.send({userId:e,resource:{raw:n}}).execute(t)},d=function(e){-1!==e.result.labelIds.indexOf("SENT")?s({title:"Email forwarded Successfully.",status:"success",duration:3e3,isClosable:!0}):s({title:"An error occurred.",description:"Unable to sent your mail.",status:"error",duration:3e3,isClosable:!0})};return r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{rightIcon:R.b,variantColor:"blue",variant:"outline",onClick:i},"Forward"),r.a.createElement(C.a,{isOpen:o,size:"xl",onClose:c,closeOnOverlayClick:!1},r.a.createElement(C.g,null),r.a.createElement(C.d,null,r.a.createElement(C.f,null,"Forward "),r.a.createElement(C.c,null),r.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var n=e.target.elements.emailTo.value;u(n,a.payload.headers,t(a.payload)),c()}},r.a.createElement(C.b,null,r.a.createElement(w.a,{isRequired:!0},r.a.createElement(x.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(x.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:A(a.payload.headers,"Subject"),readOnly:!0})),r.a.createElement(w.a,{isRequired:!0},r.a.createElement(O.a,{id:"message",minH:"280px",size:"xl",resize:"vertical",value:"------Forward Message------\r\n"+function(e){var a="";return a+="From: "+A(e,"From")+"\r\n",a+="Date: "+A(e,"Date")+"\r\n",a+="Subject: "+A(e,"Subject")+"\r\n",a+="To: "+A(e,"To")+"\r\n"}(a.payload.headers),readOnly:!0}))),r.a.createElement(C.e,null,r.a.createElement(v.a,{type:"reset",variantColor:"blue",mr:3,onClick:c},"Close"),r.a.createElement(v.a,{type:"submit",variantColor:"green"},"Send"))))))},V=J;J.prototype={forwardData:z.a.object.isRequired,getMessageBody:z.a.func.isRequired};var Z=t(114),$=t(115),ee=t(68),ae=t.n(ee),te=function(){var e=Object(n.useContext)(m).message,a=e?e.payload.headers:[],t=Object(h.a)();r.a.useEffect((function(){e&&l(e)}),[e]);var l=function(e){document.getElementById("iframe").contentWindow.document.body.innerHTML=o(e.payload)},o=function(e){var a="undefined"===typeof e.parts?e.body.data:i(e.parts);return f.Base64.decode(a)},i=function e(a){for(var t=0;t<=a.length;t++){if("undefined"!==typeof a[t].parts)return e(a[t].parts);if("text/html"===a[t].mimeType)return a[t].body.data}return""};return r.a.createElement(D.a,{direction:"column",wrap:"no-wrap",w:"58%",h:"100%",p:"0.6rem 1rem",bg:"white",color:"black",border:"1px",borderColor:"gray.200",borderTopRightRadius:"md",borderBottomRightRadius:"md"},e?r.a.createElement(n.Fragment,null,r.a.createElement(D.a,{justify:"space-around",wrap:"no-wrap",mb:2},r.a.createElement(Q,{replayData:function(e){var a=void 0!==A(e,"Reply-to")?A(e,"Reply-to"):A(e,"From"),t=A(e,"Subject"),n=A(e,"Message-ID");return{to:"".concat(a),subject:"Re: ".concat(t),msgId:"".concat(n)}}(a)}),r.a.createElement(V,{forwardData:e,getMessageBody:o}),r.a.createElement(v.a,{rightIcon:R.a,variantColor:"blue",variant:"outline",onClick:function(){return a=[e.id],n=["INBOX"],window.gapi.client.gmail.users.messages.batchModify({userId:"me",resource:{ids:a,removeLabelIds:n}}).then((function(e){204===e.status&&t({title:"Message Archived",description:"The Message is now in archive category.",status:"success",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),t({title:"An error occurred.",description:"Unable to Archive Message.",status:"error",duration:3e3,isClosable:!0})}));var a,n}},"Archive"),r.a.createElement(v.a,{rightIcon:"delete",variantColor:"blue",variant:"outline",onClick:function(){return a="me",n=e.id,window.gapi.client.gmail.users.messages.trash({userId:a,id:n}).then((function(e){200===e.status&&t({title:"Message Deleted",status:"error",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),t({title:"An error occurred.",description:"Unable to Delete Message.",status:"warning",duration:3e3,isClosable:!0})}));var a,n}},"Delete")),r.a.createElement(D.a,{className:"mailContainer",flexGrow:"2",direction:"column",wrap:"no-wrap",p:2},r.a.createElement(j.a,{className:"mailHeader",mb:2},r.a.createElement(N.a,{fontSize:"lg",fontWeight:"bold",color:"gray.700",mb:1},A(a,"Subject")),r.a.createElement(D.a,{wrap:"no-wrap",justify:"flex-start"},r.a.createElement(_.a,{name:k(A(a,"From").split("<")[0]),src:"https://bit.ly/tioluwani-kolawole",mr:4}),r.a.createElement(j.a,{w:"80%"},r.a.createElement(N.a,{fontSize:"md",color:"gray.700"},A(a,"From")),r.a.createElement(N.a,{fontSize:"sm",color:"gray.500"},function(e){var a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(a)}(A(a,"Date"))))),r.a.createElement(N.a,{fontSize:"sm",color:"gray.700",mt:1},"To: ".concat(A(a,"To")))),r.a.createElement(j.a,{className:"mailBody",flexGrow:"2"},r.a.createElement(Z.a,{ratio:16/9,h:"100%"},r.a.createElement(j.a,{as:"iframe",id:"iframe",title:"messageBody"},r.a.createElement("p",null,"Your browser does not support iframes.")))))):r.a.createElement(ne,null))},ne=function(){return r.a.createElement(D.a,{flexDirection:"column",justify:"center",alignItems:"center",mb:3,style:{height:"100%"}},r.a.createElement("img",{src:ae.a,alt:"React Logo",style:{width:"40%",height:"auto"}}),r.a.createElement($.a,{as:"h3",size:"lg",color:"#a6b0b7",mt:5},"Click on Email to Open it"))},re=t(9),le=t(120),oe=t(69),ie=function(e){var a=e.handleAuthClick,t=e.loading;return r.a.createElement(D.a,{h:"100vh",justify:"center",alignItems:"center",bg:"#e5f4f1"},r.a.createElement(v.a,{isLoading:t,leftIcon:oe.a,height:"50px",variantColor:"blue",variant:"outline",backgroundColor:"white",onClick:a},"Sign in with Google"))},ce=function(){var e=Object(n.useContext)(m).getMessages;return Object(n.useEffect)((function(){e()}),[]),r.a.createElement(D.a,{h:"100vh",minH:"600px",justify:"space-arround",wrap:"no-wrap",p:"1em",bg:"#e5f4f1",color:"white"},r.a.createElement(M,null),r.a.createElement(Y,null),r.a.createElement(te,null))},se=function(){var e=Object(n.useState)(!1),a=Object(u.a)(e,2),t=a[0],l=a[1],o=Object(n.useState)(!0),i=Object(u.a)(o,2),m=i[0],d=i[1];Object(n.useEffect)((function(){Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.load("client:auth2",{callback:function(){window.gapi.client.setApiKey("AIzaSyAzQf9oXQG7FR2FixHcVp9ksFK9NQpqKZs"),window.gapi.auth.authorize({client_id:"151874614484-4l3jt39oita663cgip5ts1s7d7npaop6.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!0},p)},onerror:function(){console.log("gapi.client failed to load!")},timeout:5e3,ontimeout:function(){console.log("gapi.client could not load in a timely manner!")}});case 2:case"end":return e.stop()}}),e)})))()}),[]);var p=function(e){e&&!e.error?(console.log("Sign-in successful"),g()):(console.error("handleAuthResult..."),console.error(e),d(!1))},g=function(){return window.gapi.client.load("gmail","v1").then((function(e){console.log("gapi client loaded for API"),l(!0)}),(function(e){console.error("Error loading window.gapi client for API",e)}))};return r.a.createElement(E,null,r.a.createElement(re.a,null,r.a.createElement(le.a,null),t?r.a.createElement(ce,null):r.a.createElement(ie,{loading:m,handleAuthClick:function(){return d(!0),window.gapi.auth.authorize({client_id:"151874614484-4l3jt39oita663cgip5ts1s7d7npaop6.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!1},p)}})))};o.a.render(r.a.createElement(se,null),document.getElementById("root"))},68:function(e,a,t){e.exports=t.p+"static/media/empty_email.c9034baf.svg"},71:function(e,a,t){e.exports=t(102)}},[[71,1,2]]]);
//# sourceMappingURL=main.e82d3df4.chunk.js.map
(this["webpackJsonpreact-gmail-api"]=this["webpackJsonpreact-gmail-api"]||[]).push([[0],{66:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),l=a(22),o=a.n(l),i=a(20),c=a(15),s=a(25),u=a(58),m=a(102),d=a(109),p=a(112),g=a(110),f=a(62),b=a(42),E=a(103),h=function(){var e=Object(m.a)(),t=e.isOpen,a=e.onOpen,l=e.onClose,o=Object(d.a)(),i=function(e,t,a){var r="";for(var n in e)r+=n+=": "+e[n]+"\r\n";r+="\r\n"+t;var l=s.Base64.encodeURI(r);window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:l}}).execute(a)},c=function(e){-1!==e.result.labelIds.indexOf("SENT")?o({title:"Message Sent.",description:"We've Sent your email.",status:"success",duration:9e3,isClosable:!0}):o({title:"An error occurred.",description:"Unable to sent your email.",status:"error",duration:9e3,isClosable:!0})};return n.a.createElement(r.Fragment,null,n.a.createElement(p.a,{w:"100%",h:"48px",leftIcon:u.a,borderRadius:"20px",variant:"solid",variantColor:"blue",onClick:a},"New Message"),n.a.createElement(g.a,{isOpen:t,size:"xl",onClose:l,closeOnOverlayClick:!1},n.a.createElement(g.g,null),n.a.createElement(g.d,null,n.a.createElement(g.f,null,"New Message"),n.a.createElement(g.c,null),n.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var t=e.target,a=t.elements.emailTo.value,r=t.elements.subject.value,n=t.elements.message.value;i({To:a,Subject:r},n,c),l()}},n.a.createElement(g.b,null,n.a.createElement(f.a,{isRequired:!0},n.a.createElement(b.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(b.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text"})),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(E.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"}))),n.a.createElement(g.e,null,n.a.createElement(p.a,{type:"reset",variantColor:"blue",mr:3,onClick:l},"Close"),n.a.createElement(p.a,{type:"submit",variantColor:"green"},"Send"))))))},y=a(4),v=a(104),C=a(17),w=a(44),x=function(){var e=Object(r.useContext)(J),t=e.getMessages,a=e.setCurrentLabel,l=Object(r.useState)("INBOX"),o=Object(c.a)(l,2),i=o[0],s=o[1],u=function(e){var r=e.target.id;s(r),a(r),t(r)};return n.a.createElement(y.a,{w:"16%",h:"100%",bg:"white",border:"1px",borderColor:"gray.200",borderTopLeftRadius:"md",borderBottomLeftRadius:"md"},n.a.createElement(v.b,null,n.a.createElement(v.a,{p:"0.5rem 1rem 1rem"},n.a.createElement(h,null)),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"INBOX",w:"100%",h:"45px",py:2,pl:8,leftIcon:C.c,variantColor:"blue",variant:"INBOX"===i?"solid":"ghost",justifyContent:"flex-start",onClick:u},"Inbox")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"STARRED",w:"100%",h:"45px",py:2,pl:8,leftIcon:C.h,variantColor:"blue",variant:"STARRED"===i?"solid":"ghost",justifyContent:"flex-start",onClick:u},"Starred")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"IMPORTANT",w:"100%",h:"45px",py:2,pl:8,leftIcon:C.d,variantColor:"blue",variant:"IMPORTANT"===i?"solid":"ghost",justifyContent:"flex-start",onClick:u},"Important")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"SENT",w:"100%",h:"45px",py:2,pl:8,leftIcon:w.b,variantColor:"blue",variant:"SENT"===i?"solid":"ghost",justifyContent:"flex-start",onClick:u},"Sent")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"DRAFT",w:"100%",h:"45px",py:2,pl:8,leftIcon:w.a,variantColor:"blue",variant:"DRAFT"===i?"solid":"ghost",justifyContent:"flex-start",onClick:u},"Drafts")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"TRASH",w:"100%",h:"45px",py:2,pl:8,leftIcon:"delete",variantColor:"blue",variant:"TRASH"===i?"solid":"ghost",justifyContent:"flxex-start",onClick:u},"Trash")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"CATEGORY_SOCIAL",w:"100%",h:"45px",py:2,pl:8,leftIcon:C.f,variantColor:"blue",variant:"CATEGORY_SOCIAL"===i?"solid":"ghost",justifyContent:"flxex-start",onClick:u},"Social")),n.a.createElement(v.a,null,n.a.createElement(p.a,{id:"CATEGORY_PROMOTIONS",w:"100%",h:"45px",py:2,pl:8,leftIcon:C.e,variantColor:"blue",variant:"CATEGORY_PROMOTIONS"===i?"solid":"ghost",justifyContent:"flxex-start",onClick:u},"Promotions"))))},O=function(e,t){var a=e.find((function(e){return e.name===t}));return void 0!==a?a.value:void 0},j=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},S=function(e){return e.replace(/['"]+/g,"")},T=a(105),I=a(111),R=a(106),k=function(e){var t=e.message,a=e.handleMessageClick,r=S(O(t.payload.headers,"From").split("<")[0]),l=O(t.payload.headers,"Subject"),o=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(t.snippet.substr(0,75)),i=t.labelIds.indexOf("UNREAD")>-1?"#fff":"#E2E8F0";return n.a.createElement(T.a,{key:t.id,id:t.id,onClick:a,wrap:"no-wrap",justify:"space-around",py:2,bg:i,borderTop:"1px",borderBottom:"1px",borderColor:"gray.300",cursor:"pointer"},n.a.createElement(I.a,{name:r,src:"https://bit.ly/tioluwani-kolawole"}),n.a.createElement(y.a,{w:"80%"},n.a.createElement(R.a,{fontSize:"sm",color:"gray.700",isTruncated:!0},r),n.a.createElement(R.a,{fontSize:"md",fontWeight:"bold",color:"#3182ce",isTruncated:!0},l),n.a.createElement(R.a,{fontSize:"xs",color:"gray.500"},o)))},M=a(63),A=a(107),D=a(45),F=a(26),z=a(65),N=function(){var e=Object(r.useContext)(J).messages;return n.a.createElement(T.a,{direction:"column",wrap:"no-wrap",w:"26%",h:"100%",bg:"#f1f1f1",color:"black"},n.a.createElement(y.a,{py:"5px",bg:"white",border:"1px",borderColor:"gray.200"},n.a.createElement(A.a,{size:"lg"},n.a.createElement(D.a,{children:n.a.createElement(F.a,{name:"search",color:"gray.300"})}),n.a.createElement(b.a,{type:"text",placeholder:"Search mail",borderWidth:"0px",borderRadius:"0px",focusBorderColor:"white"}))),e.length?n.a.createElement(B,null):n.a.createElement(q,null))},B=function(){var e=Object(r.useContext)(J),t=e.messages,a=e.getOneMessage,l=e.hasMoreMessages,o=e.loadMoreMessages,i=function(e){var t=e.currentTarget.getAttribute("id");a(t)};return n.a.createElement(y.a,{overflowY:"auto",id:"scrollableDiv"},n.a.createElement(M.a,{dataLength:t.length,next:function(){o()},hasMore:l,loader:n.a.createElement("h4",null,"Loading..."),scrollableTarget:"scrollableDiv"},t.map((function(e,t){return n.a.createElement(k,{key:t,message:e,handleMessageClick:i})}))))},q=function(){return n.a.createElement(y.a,{mt:6,display:"flex",align:"center",justifyContent:"center"},n.a.createElement(z.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"}))},P=a(14),L=a.n(P),U=function(e){var t=e.replayData,a=Object(m.a)(),l=a.isOpen,o=a.onOpen,i=a.onClose,c=Object(d.a)(),u=function(e,t,a){var r="";for(var n in e)r+=n+=": "+e[n]+"\r\n";r+="\r\n"+t;var l=s.Base64.encodeURI(r);window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:l}}).execute(a)},h=function(e){-1!==e.result.labelIds.indexOf("SENT")?c({title:"Message Sent.",status:"success",duration:3e3,isClosable:!0}):c({title:"An error occurred.",description:"Unable to sent your replay.",status:"error",duration:3e3,isClosable:!0})};return n.a.createElement(r.Fragment,null,n.a.createElement(p.a,{rightIcon:C.g,variantColor:"blue",variant:"outline",onClick:o},"Replay"),n.a.createElement(g.a,{isOpen:l,size:"xl",onClose:i,closeOnOverlayClick:!1},n.a.createElement(g.g,null),n.a.createElement(g.d,null,n.a.createElement(g.f,null,"Replay "),n.a.createElement(g.c,null),n.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var t=e.target,a=t.elements.emailTo.value,r=t.elements.subject.value,n=t.elements["reply-message-id"].value,l=t.elements.message.value;u({To:a,Subject:r,"In-Reply-To":n},l,h),i()}},n.a.createElement(g.b,null,n.a.createElement(b.a,{type:"hidden",id:"reply-message-id",value:t.msgId,readOnly:!0}),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(b.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text",value:t.to,readOnly:!0})),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(b.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:t.subject,readOnly:!0})),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(E.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"}))),n.a.createElement(g.e,null,n.a.createElement(p.a,{type:"reset",variantColor:"blue",mr:3,onClick:i},"Close"),n.a.createElement(p.a,{type:"submit",variantColor:"green"},"Send"))))))},H=U;U.prototype={replayData:L.a.object.isRequired};var G=function(e){var t=e.forwardData,a=e.getMessageBody,l=Object(m.a)(),o=l.isOpen,i=l.onOpen,c=l.onClose,u=Object(d.a)(),h=function(e,t,a){var r="";r+="From: ".concat(O(t,"From")," \r\n"),r+="Date: ".concat(O(t,"Date")," \r\n"),r+="Subject: ".concat(O(t,"Subject")," \r\n"),r+="To: ".concat(e," \r\n"),r+="Content-Type: text/html; charset=UTF-8 \r\n",r+="\r\n ".concat(a),y("me",r,v)},y=function(e,t,a){var r=s.Base64.encodeURI(t);window.gapi.client.gmail.users.messages.send({userId:e,resource:{raw:r}}).execute(a)},v=function(e){-1!==e.result.labelIds.indexOf("SENT")?u({title:"Email forwarded Successfully.",status:"success",duration:3e3,isClosable:!0}):u({title:"An error occurred.",description:"Unable to sent your mail.",status:"error",duration:3e3,isClosable:!0})};return n.a.createElement(r.Fragment,null,n.a.createElement(p.a,{rightIcon:C.b,variantColor:"blue",variant:"outline",onClick:i},"Forward"),n.a.createElement(g.a,{isOpen:o,size:"xl",onClose:c,closeOnOverlayClick:!1},n.a.createElement(g.g,null),n.a.createElement(g.d,null,n.a.createElement(g.f,null,"Forward "),n.a.createElement(g.c,null),n.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var r=e.target.elements.emailTo.value;h(r,t.payload.headers,a(t.payload)),c()}},n.a.createElement(g.b,null,n.a.createElement(f.a,{isRequired:!0},n.a.createElement(b.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(b.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:O(t.payload.headers,"Subject"),readOnly:!0})),n.a.createElement(f.a,{isRequired:!0},n.a.createElement(E.a,{id:"message",minH:"280px",size:"xl",resize:"vertical",value:"------Forward Message------\r\n"+function(e){var t="";return t+="From: "+O(e,"From")+"\r\n",t+="Date: "+O(e,"Date")+"\r\n",t+="Subject: "+O(e,"Subject")+"\r\n",t+="To: "+O(e,"To")+"\r\n"}(t.payload.headers),readOnly:!0}))),n.a.createElement(g.e,null,n.a.createElement(p.a,{type:"reset",variantColor:"blue",mr:3,onClick:c},"Close"),n.a.createElement(p.a,{type:"submit",variantColor:"green"},"Send"))))))},X=G;G.prototype={forwardData:L.a.object.isRequired,getMessageBody:L.a.func.isRequired};var Y=a(108),_=function(){var e=Object(r.useContext)(J).message,t=j(e)?[]:e.payload.headers,a=Object(d.a)();n.a.useEffect((function(){j(e)||l(e)}),[e]);var l=function(e){document.getElementById("iframe").contentWindow.document.body.innerHTML=o(e.payload)},o=function(e){var t="undefined"===typeof e.parts?e.body.data:i(e.parts);return s.Base64.decode(t)},i=function e(t){for(var a=0;a<=t.length;a++){if("undefined"!==typeof t[a].parts)return e(t[a].parts);if("text/html"===t[a].mimeType)return t[a].body.data}return""};return n.a.createElement(T.a,{direction:"column",wrap:"no-wrap",w:"58%",h:"100%",p:"0.6rem 1rem",bg:"white",color:"black",border:"1px",borderColor:"gray.200",borderTopRightRadius:"md",borderBottomRightRadius:"md"},!j(e)&&n.a.createElement(r.Fragment,null,n.a.createElement(T.a,{justify:"space-around",wrap:"no-wrap",mb:2},n.a.createElement(H,{replayData:function(e){var t=void 0!==O(e,"Reply-to")?O(e,"Reply-to"):O(e,"From"),a=O(e,"Subject"),r=O(e,"Message-ID");return{to:"".concat(t),subject:"Re: ".concat(a),msgId:"".concat(r)}}(t)}),n.a.createElement(X,{forwardData:e,getMessageBody:o}),n.a.createElement(p.a,{rightIcon:C.a,variantColor:"blue",variant:"outline",onClick:function(){return t=[e.id],r=["INBOX"],window.gapi.client.gmail.users.messages.batchModify({userId:"me",resource:{ids:t,removeLabelIds:r}}).then((function(e){204===e.status&&a({title:"Message Archived",description:"The Message is now in archive category.",status:"success",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),a({title:"An error occurred.",description:"Unable to Archive Message.",status:"error",duration:3e3,isClosable:!0})}));var t,r}},"Archive"),n.a.createElement(p.a,{rightIcon:"delete",variantColor:"blue",variant:"outline",onClick:function(){return t="me",r=e.id,window.gapi.client.gmail.users.messages.trash({userId:t,id:r}).then((function(e){200===e.status&&a({title:"Message Deleted",status:"error",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),a({title:"An error occurred.",description:"Unable to Delete Message.",status:"warning",duration:3e3,isClosable:!0})}));var t,r}},"Delete")),n.a.createElement(T.a,{className:"mailContainer",flexGrow:"2",direction:"column",wrap:"no-wrap",p:2},n.a.createElement(y.a,{className:"mailHeader",mb:2},n.a.createElement(R.a,{fontSize:"lg",fontWeight:"bold",color:"gray.700",mb:1},O(t,"Subject")),n.a.createElement(T.a,{wrap:"no-wrap",justify:"flex-start"},n.a.createElement(I.a,{name:S(O(t,"From").split("<")[0]),src:"https://bit.ly/tioluwani-kolawole",mr:4}),n.a.createElement(y.a,{w:"80%"},n.a.createElement(R.a,{fontSize:"md",color:"gray.700"},O(t,"From")),n.a.createElement(R.a,{fontSize:"sm",color:"gray.500"},function(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(t)}(O(t,"Date"))))),n.a.createElement(R.a,{fontSize:"sm",color:"gray.700",mt:1},"To: ".concat(O(t,"To")))),n.a.createElement(y.a,{className:"mailBody",flexGrow:"2"},n.a.createElement(Y.a,{ratio:16/9,h:"100%"},n.a.createElement(y.a,{as:"iframe",id:"iframe",title:"messageBody"},n.a.createElement("p",null,"Your browser does not support iframes.")))))))},W=a(9),K=a(113),Q=a(64),J=n.a.createContext(),V=function(){var e=Object(r.useState)("INBOX"),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(r.useState)({}),s=Object(c.a)(o,2),u=s[0],m=s[1],d=Object(r.useState)([]),p=Object(c.a)(d,2),g=p[0],f=p[1],b=Object(r.useState)(!0),E=Object(c.a)(b,2),h=E[0],y=E[1],v=Object(r.useState)(""),C=Object(c.a)(v,2),w=C[0],x=C[1],O=Object(r.useState)(!1),j=Object(c.a)(O,2),S=j[0],T=j[1],I=Object(r.useState)(!0),R=Object(c.a)(I,2),k=R[0],M=R[1];Object(r.useEffect)((function(){window.gapi.load("client:auth2",{callback:function(){window.gapi.client.setApiKey("AIzaSyAzQf9oXQG7FR2FixHcVp9ksFK9NQpqKZs"),window.gapi.auth.authorize({client_id:"151874614484-4l3jt39oita663cgip5ts1s7d7npaop6.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!0},A)},onerror:function(){console.log("gapi.client failed to load!")},timeout:5e3,ontimeout:function(){console.log("gapi.client could not load in a timely manner!")}})}),[]);var A=function(e){e&&!e.error?(console.log("Sign-in successful"),T(!0),D()):(console.error("handleAuthResult..."),console.error(e),M(!1))},D=function(){return window.gapi.client.load("gmail","v1").then((function(e){console.log("gapi client loaded for API"),F()}),(function(e){console.error("Error loading window.gapi client for API",e)}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20}).then((function(e){f([]),e.result.nextPageToken?(x(e.result.nextPageToken),y(!0)):(x(""),y(!1)),z(e)})).catch((function(e){console.log(e)}))},z=function(e){(e.result.messages?e.result.messages:[]).forEach((function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id}).then((function(e){f((function(t){return[].concat(Object(i.a)(t),[e.result])}))}),(function(e){console.error("getMessagesData error",e)}))}))};return n.a.createElement(J.Provider,{value:{messages:g,message:u,getMessages:F,getOneMessage:function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e}).then((function(e){m(e.result)}),(function(e){console.error("getMessage error",e)}))},setCurrentLabel:l,hasMoreMessages:h,loadMoreMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20,pageToken:w}).then((function(e){e.result.nextPageToken?(x(e.result.nextPageToken),y(!0)):(x(""),y(!1)),z(e)})).catch((function(e){console.error("Execute error",e)}))}}},n.a.createElement(W.a,null,n.a.createElement(K.a,null),S?n.a.createElement($,null):n.a.createElement(Z,{loading:k,handleAuthClick:function(){return M(!0),window.gapi.auth.authorize({client_id:"151874614484-4l3jt39oita663cgip5ts1s7d7npaop6.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!1},A)}})))},Z=function(e){var t=e.handleAuthClick,a=e.loading;return n.a.createElement(T.a,{h:"100vh",justify:"center",alignItems:"center",bg:"#e5f4f1"},n.a.createElement(p.a,{isLoading:a,leftIcon:Q.a,height:"50px",variantColor:"blue",variant:"outline",backgroundColor:"white",onClick:t},"Sign in with Google"))},$=function(){return n.a.createElement(T.a,{h:"100vh",minH:"600px",justify:"space-arround",wrap:"no-wrap",p:"1em",bg:"#e5f4f1",color:"white"},n.a.createElement(x,null),n.a.createElement(N,null),n.a.createElement(_,null))};o.a.render(n.a.createElement(V,null),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.e77b2629.chunk.js.map